async function fetchOfficialData(uLat, uLng) {
    const tbody = document.getElementById('bikeList');
    tbody.innerHTML = '<tr><td colspan="4">è®€å–å®˜æ–¹å³æ™‚è³‡æ–™ä¸­...</td></tr>';

    try {
        // 1. å®˜æ–¹ API ç¶²å€ (å°ä¸­)
        const officialApi = "https://ybjson02.youbike.com.tw:60008/yb2/taichung/gwjs.json";
        
        // 2. ä½¿ç”¨ä»£ç†ä¼ºæœå™¨ corsproxy.io (ä¸éœ€è¦ä»»ä½•é‡‘é‘°æˆ– ID/Secret)
        const proxyUrl = `https://corsproxy.io/?${encodeURIComponent(officialApi)}`;

        const response = await fetch(proxyUrl);
        if (!response.ok) throw new Error("å®˜æ–¹é€£ç·šå¤±æ•—");
        
        const rawData = await response.json();
        const data = rawData.retVal; // å®˜æ–¹è³‡æ–™ä¸»é«”åœ¨ retVal æ¬„ä½

        // 3. è™•ç†èˆ‡æ’åºè³‡æ–™
        const stations = Object.keys(data).map(key => {
            const s = data[key];
            return {
                name: s.sna.replace("YouBike2.0_", ""),
                lat: parseFloat(s.lat),
                lng: parseFloat(s.lng),
                available: parseInt(s.sbi), // å¯å€Ÿ
                empty: parseInt(s.bemp),    // å¯é‚„
                distance: calcDist(uLat, uLng, parseFloat(s.lat), parseFloat(s.lng))
            };
        })
        .sort((a, b) => a.distance - b.distance)
        .slice(0, 30); // é¡¯ç¤ºæœ€è¿‘ 30 ç«™

        // 4. æ¸²æŸ“åˆ°ç•«é¢
        tbody.innerHTML = "";
        stations.forEach(s => {
            L.marker([s.lat, s.lng]).addTo(map)
                .bindPopup(`<b>${s.name}</b><br>ğŸš² å¯å€Ÿï¼š${s.available}<br>ğŸ…¿ï¸ å¯é‚„ï¼š${s.empty}`);

            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td style="text-align:left">${s.name}</td>
                <td>${Math.round(s.distance)}m</td>
                <td style="color:${s.available > 0 ? 'green' : 'red'}; font-weight:bold;">${s.available}</td>
                <td>${s.empty}</td>
            `;
            tbody.appendChild(tr);
        });

    } catch (err) {
        console.error(err);
        // ä¿®æ”¹é€™è£¡çš„æç¤ºæ–‡å­—ï¼Œé¿å…èª¤å°
        tbody.innerHTML = '<tr><td colspan="4" style="color:red">ç„¡æ³•å–å¾—å®˜æ–¹ API è³‡æ–™ï¼Œè«‹æª¢æŸ¥é€£ç·šæˆ–ä»£ç†ä¼ºæœå™¨ç‹€æ…‹ã€‚</td></tr>';
    }
}
